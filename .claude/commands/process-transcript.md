# /process-transcript - Обработка транскриптов ktalk

> **Новая команда для executive-assistant**
>
> Анализ и структурирование встреч из Naomi Talk с автоматическим созданием профилей, проектов и решений.

---

## Что делает эта команда

1. Получает транскрипт встречи из ktalk MCP
2. Анализирует через LLM
3. Извлекает: участники, темы, решения, задачи
4. Заполняет шаблон встречи
5. Создаёт профили новых участников (по схеме executive-assistant)
6. Проводит интерактивное закрепление

---

## Использование

```
/process-transcript
```

Или укажите конкретную запись:
```
/process-transcript --id <recording_id>
```

---

## Совместимость с executive-assistant

Эта команда использует ту же схему ID и структуру, что и оригинальный vault:

| Параметр | Значение |
|----------|----------|
| **Схема ID** | `{первая_буква_имени}{фамилия}` транслит |
| **Профили** | `10_PEOPLE/{id}/{id}.md` |
| **Встречи** | `20_MEETINGS/ktalk/YYYY-MM-DD_{title}.md` |
| **Проекты** | `30_PROJECTS/active/{id}/{id}.md` |
| **Решения** | `40_DECISIONS/records/DEC-{NNNN}.md` |

---

## Алгоритм работы

### Шаг 1: Получение данных

**Если указан recording_id:**
- Получите данные через ktalk MCP

**Если не указан:**
- Покажите список последних записей
- Попросите выбрать

### Шаг 2: Анализ транскрипта

Извлеките сущности:

```yaml
extracted:
  title: "Краткое название"
  date: YYYY-MM-DD
  duration: "1h 30m"
  meeting_type: sprint-planning|masterclass|sync|1-1|committee|other

  participants:
    - name: "Фамилия Имя"  # Важно: Фамилия первая для ID
      role: "Роль"
      company: "Компания"

  topics: []
  decisions:
    - what: "Что решено"
      who: "ID или имя"
      when: "Срок"
  actions:
    - task: "Задача"
      owner: "ID или имя"
      deadline: "YYYY-MM-DD"

  summary: "2-3 предложения"
```

### Шаг 3: Генерация ID участников

**Важно!** Используйте ту же схему, что и в executive-assistant:

```
ID = {первая_буква_имени}{фамилия_транслит}
```

Примеры:
- Демьянов Максим → `mdemyanov`
- Иванов Константин → `kivanov`
- Зыков Петр → `pzykov`

### Шаг 4: Создание файла встречи

Путь: `20_MEETINGS/ktalk/YYYY-MM-DD_{нормализованный_заголовок}.md`

Используйте шаблон из `90_TEMPLATES/template_committee_meeting.md` или создайте базовый:

```markdown
---
type: meeting
id: meeting-{timestamp}
title: "{Название}"
date: {YYYY-MM-DD}
meeting_type: {тип}
duration: {длительность}
created: {YYYY-MM-DD}
tags: [ktalk]
participants:
  - {id1}
  - {id2}
---

# {Название}

**Дата:** {дата}
**Тип:** {тип}
**Участники:** {список с [[ссылками]]}

## Краткое содержание

{summary}

## Участники

| Имя | Роль |
|-----|------|
| [[10_PEOPLE/{id}/{id}|{name}]] | {role} |

## Темы обсуждения

1. {topic1}
2. {topic2}

## Решения

| Что | Кто | Когда |
|-----|-----|-------|
| {decision} | [[10_PEOPLE/{id}/{id}|{name}]] | {when} |

## Задачи

| Задача | Ответственный | Срок |
|--------|---------------|------|
| {task} | [[10_PEOPLE/{id}/{id}|{name}]] | {deadline} |

## Минутки / Заметки

<!-- Заполняется через интерактивное закрепление -->
```

### Шаг 5: Создание профилей участников

Для каждого нового участника:

1. **Проверьте существование:**
   ```bash
   Grep --pattern "id: {id}" --glob "10_PEOPLE/**/*.md"
   ```

2. **Если нет — создайте:**
   - Папка: `10_PEOPLE/{id}/`
   - Файл: `10_PEOPLE/{id}/{id}.md`
   - Используйте `90_TEMPLATES/template_person.md`
   - Заполните доступные данные

3. **Определите тип связи:**
   - `reporting: direct` — если подчинённый владельца
   - `reporting: external` — если внешний контакт
   - `reporting: functional` — если функциональная связь

### Шаг 6: Интерактивное закрепление

**Предложите добавить минутки:**
```
У меня есть анализ транскрипта, но ваши личные заметки ценнее.
Добавьте свои минутки, если вы их ведёте.

Формат любой — bullet points, свободный текст.
```

**Если нет — мини-ретроспектива:**
```
Минуток нет. Давайте пройдём мини-ретроспективу:
1. Что главное произошло на встрече?
2. Какие решения зафиксировали?
3. Что осталось непонятным?
4. Есть ли блокеры?
```

Добавьте в `## Минутки / Заметки`.

---

## Интеграция с существующими командами

После обработки встречи можно:

| Команда | Для чего |
|---------|----------|
| `/new-project` | Создать проект для упомянутой задачи |
| `/new-decision` | Фиксировать важное решение |
| `/new-1-1` | Запланировать 1-1 с участником |
| `/find-person {id}` | Найти информацию об участнике |

---

## Пример работы

```
Пользователь: /process-transcript

Ассистент: Получаю записи из ktalk...

Доступные записи:
1. 2026-02-26 | AI Sprint Planning | 1h 30m
2. 2026-02-25 | MCP to Talk | 45m

Какую обработаем? (номер или ID)

Пользователь: 1

Ассистент: Анализирую...

Найдены участники:
- mdemyanov (существует)
- kivanov (новый) → создам профиль
- pzykov (новый) → создам профиль

Решений: 2
Задач: 5

Создаю: 20_MEETINGS/ktalk/2026-02-26_AI-Sprint-Planning.md
✓ Профиль: 10_PEOPLE/kivanov/kivanov.md
✓ Профиль: 10_PEOPLE/pzykov/pzykov.md

У вас есть минутки с этой встречи?
```

---

## Связанные файлы

- `90_TEMPLATES/template_committee_meeting.md`
- `90_TEMPLATES/template_person.md`
- `90_TEMPLATES/template_project.md`
- `.claude/docs/vault-config.md`
